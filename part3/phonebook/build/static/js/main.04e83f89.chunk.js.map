{"version":3,"sources":["Services.js","App.js","index.js"],"names":["baseUrl","axios","get","then","res","data","newObject","post","id","delete","updated","put","catch","err","console","log","Filter","onChange","value","PersonForm","onSubmit","onNameChange","onNumberChange","nameValue","numberValue","type","Persons","persons","search","handleDelete","filter","person","name","toLowerCase","includes","map","p","number","onClick","Notification","successMessage","errorMessage","className","App","useState","setPersons","newName","setNewName","newNumber","setNewNumber","setSearch","setErrorMessage","setSuccessMessage","useEffect","svc","i","alert","event","target","preventDefault","existingPerson","find","window","confirm","changedPerson","returnedPerson","setTimeout","error","newPerson","concat","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.04e83f89.chunk.js","sourcesContent":["import axios from 'axios'\nconst baseUrl = \"/api/persons\"\n\nconst getAll = () => {\n    const request = axios.get(baseUrl)\n    return request.then(res => {\n        return res.data\n    })\n}\n\nconst create = (newObject) => {\n    const req = axios.post(baseUrl, newObject)\n    return req.then(res => res.data)\n}\n\nconst remove = (id) => {\n    const req = axios.delete(`${baseUrl}/${id}`)\n    return req.then(res => res.data)\n}\n\nconst update = (id, updated) => {\n    const req = axios.put(`${baseUrl}/${id}`, updated)\n    return req\n        .then(res => res.data)\n        .catch(err => console.log(err))\n}\n\n\n\nexport default { getAll, create, remove, update }\n","import React, { useState, useEffect } from 'react'\nimport svc from './Services'\nimport './App.css'\n\nconst Filter = ({ onChange, value }) => {\n  return (\n    <div>\n\n      Filter shown with<input value={value} onChange={onChange} />\n    </div>\n\n  )\n}\n\nconst PersonForm = ({ onSubmit, onNameChange, onNumberChange, nameValue, numberValue }) => {\n  return (\n\n    <form onSubmit={onSubmit}>\n      <div>name: <input value={nameValue} onChange={onNameChange} /></div>\n      <div>number: <input value={numberValue} onChange={onNumberChange} /></div>\n\n      <div>\n        <button type=\"submit\">add</button>\n      </div>\n    </form>\n  )\n}\n\nconst Persons = ({ persons, search, handleDelete }) => {\n  return (\n    <div>\n\n      {\n        persons.filter((person) =>\n          person.name.toLowerCase().includes(search.toLowerCase())\n        ).map(p => {\n          return (\n            <>\n              <p key={p.name}>{p.name} {p.number}</p>\n              <button onClick={() => handleDelete(p.id)}>delete</button>\n            </>\n          )\n        })\n      }\n    </div>\n  )\n}\n\nconst Notification = ({ successMessage, errorMessage }) => {\n  if (!successMessage && !errorMessage) {\n    return null\n  }\n\n  return (\n    <div className={`message ${successMessage ? \"success\" : \"error\"}`}>\n      {successMessage ? successMessage : errorMessage}\n    </div>\n  );\n}\n\n\nconst App = () => {\n  const [persons, setPersons] = useState([])\n  const [newName, setNewName] = useState('')\n  const [newNumber, setNewNumber] = useState('')\n  const [search, setSearch] = useState('')\n  const [errorMessage, setErrorMessage] = useState('')\n  const [successMessage, setSuccessMessage] = useState('')\n\n  // const getData = () => {\n\n  //   axios\n  //     .get('http://localhost:3001/persons')\n  //     .then(res => {\n  //       console.log(res);\n  //       setPersons(res.data)\n  //     })\n  // }\n\n\n\n\n\n  useEffect(() => {\n    svc.getAll()\n      .then(i => {\n        setPersons(i)\n      })\n      .catch((err) => alert(err));\n\n  }, [])\n\n\n\n  const handleSubmit = (event) => {\n    event.preventDefault()\n    console.log(newName)\n    console.log(newNumber)\n    const existingPerson = persons.find((person) => person.name.toLowerCase() === newName.toLowerCase())\n\n    if (existingPerson && existingPerson.number === newNumber) {\n      alert(`${newName} is already added to phonebook`);\n      setNewName('')\n      setNewNumber('')\n      return;\n    }\n\n    if (existingPerson && existingPerson.number !== newNumber) {\n      if (\n        window.confirm(\n          `${existingPerson.name} is already added to phonebook, replace the old number with a new one?`\n        )\n      ) {\n        const changedPerson = { ...existingPerson, number: newNumber };\n        const id = existingPerson.id;\n\n        svc\n          .update(id, changedPerson)\n          .then((returnedPerson) => {\n            setPersons(\n              persons.map((person) =>\n                person.id !== id ? person : returnedPerson\n              )\n            );\n            setSuccessMessage(`Updated ${changedPerson.name}'s number`);\n            setTimeout(() => {\n              setSuccessMessage(null);\n            }, 5000);\n          })\n          .catch((err) => {\n            // setErrorMessage(\n            //   `Information of ${changedPerson.name} has already been removed from server`\n            // );\n            // setTimeout(() => {\n            //   setErrorMessage(null);\n            // }, 5000);\n            // setPersons(persons.filter((p) => p.id !== id));\n            // setNewName(\"\");\n            // setNewNumber(\"\");\n\n            if (err.res.data) {\n              setErrorMessage(err.res.data.error)\n              setTimeout(() => {\n                setErrorMessage(null)\n              }, 5000)\n            } else {\n              setErrorMessage(\n                `Information of ${changedPerson.name} has already been removed from server`\n              )\n              setPersons(persons.filter((p) => p.id !== id))\n              setNewName(\"\")\n              setNewNumber(\"\")\n              setTimeout(() => {\n                setErrorMessage(null)\n              }, 5000)\n            }\n          });\n        setNewName('')\n        setNewNumber('')\n        return;\n      } else {\n        return;\n      }\n    }\n\n\n\n\n\n    const newPerson = { name: newName, number: newNumber }\n\n    svc.create(newPerson).then((returnedPerson) => {\n      setSuccessMessage(`${newPerson.name} added to phonebook`)\n      setTimeout(() => {\n        setErrorMessage(null)\n      }, 5000)\n      setPersons(persons.concat(returnedPerson));\n      setNewName('');\n      setNewNumber('');\n    })\n      .catch((err) => {\n        setErrorMessage(err.res.data.error)\n        setTimeout(() => {\n          setErrorMessage(null)\n        }, 5000)\n      })\n\n\n  }\n\n  const handleDelete = (id) => {\n    if (window.confirm(\"Do you really want to delete this person\")) {\n      svc\n        .remove(id)\n        .then(() => {\n          setSuccessMessage(`Deleted ${persons.find((person) => person.id === id).name}`)\n          setPersons(persons.filter((person) => person.id !== id));\n        })\n        .catch((err) => {\n          setErrorMessage(`${err}`)\n          setTimeout(() => {\n            setErrorMessage(null)\n          }, 5000)\n        });\n    } else {\n      return\n    }\n  };\n\n  const handleNameChange = (event) => {\n    setNewName(event.target.value)\n  }\n\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value)\n  }\n\n  const handleSearchChange = (event) => {\n    setSearch(event.target.value)\n  }\n\n\n\n\n  return (\n    <div>\n      <Notification\n        successMessage={successMessage}\n        errorMessage={errorMessage}\n      />\n      <h2>Phonebook</h2>\n      <Filter value={search} onChange={handleSearchChange} />\n\n      <h3>Add a new</h3>\n\n      <PersonForm\n        onSubmit={handleSubmit}\n        onNameChange={handleNameChange}\n        onNumberChange={handleNumberChange}\n        nameValue={newName}\n        numberValue={newNumber}\n      />\n\n      <h3>Numbers</h3>\n\n      <Persons persons={persons} search={search} handleDelete={handleDelete} />\n\n    </div>\n  )\n}\n\nexport default App\n\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}